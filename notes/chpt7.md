
# Chapter 7

So, funnily enough, I ended up implementing the Line and Text layouts myself and this chapter handles that. Interesting!! That's a bit of less work for me. There isn't any first-word pseudo-class so yeah, I don't think I want to use their approach. 

For the click handling, I think I might adjust the approach the book is using. Instead of the list comprehension the book is using, I think I will implement a method on the Layout objects to search for coordinates (since some lower elements don't actually know their x and y coordinates). This will also help us be faster since if our y is out of range we can just return. Nice. 

So the click link navigation works fairly well. Only real issue is alot of the sites I would link to aren't very easy for my browser to handle (due to malformed html and some css exceptions that are on the backburner). Still, progress!

## Multiple Pages 

SHouldn't be anything crazy. 


NEED TO REMEMBER WHEN WE CHANGE TABS TO DO A RE-LAYOUT (we can skip that step if browser hasn't resized)

Yeah, I imagine later one we might tackle some techniques to keep re-rendering the entire layout tree to a minimum. Anyway, I have just discovered a slight bug in mein HTML parser:

```
<div class="further">
<p>The layout objects generated by a text node need not even be
consecutive. English containing a Farsi quotation, for example, can flip
from left-to-right to right-to-left in the middle of a line. The text
layout objects end up in a <a
href="https://www.w3.org/International/articles/inline-bidi-markup/uba-basics">surprising
order</a>. And then there are languages laid out <a
href="https://en.wikipedia.org/wiki/Mongolian_script">vertically</a>â€¦</p>
</div>
```
The href value for the a tags isn't being picked up correctly due to the newlines -> simple fix. We are getting somewhere! With a bit of elbow grease we can really make this browser somewhat workable (within the confines of the Javascript implementation). 

I am going to do things slightly differently to the textbook. Chrome will calculate its height and Browser will use this value when laying out webpages. I want the coordinates of elements in the DOM to be exactly what they render as on the canvas to make it easier to handle clicks and rendering n stuff. 

Side quest: when we click on the scroll bar navigate to that place! 

The home page renders kinda strange for us. That is something we will need to look at. 